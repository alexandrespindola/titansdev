var Lr=/\/v\d+\//,Ur=/\.(ai|avif|gif|png|webp|bmp|bw|djvu|dng|ps|ept|eps|eps3|fbx|flif|gif|glb|gltf|heif|heic|ico|indd|jpg|jpe|jpeg|jp2|wdp|jxr|hdp|obj|pdf|ply|png|psd|arw|cr2|svg|tga|tif|tiff|u3ma|usdz|webp|3g2|3gp|avi|flv|m3u8|ts|m2ts|mts|mov|mkv|mp4|mpeg|mpd|mxf|ogv|webm|wmv)$/i,Br=/https?:\/\/(?<host>[^/]+)\/(?<cloudName>[^/]+)?\/?(?<assetType>image|images|video|videos|raw|files)\/(?<deliveryType>upload|fetch|private|authenticated|sprite|facebook|twitter|youtube|vimeo)?\/?(?<signature>s--([a-zA-Z0-9_-]{8}|[a-zA-Z0-9_-]{32})--)?\/?(?<transformations>(?:[^_/]+_[^,/]+,?\/?)*\/)*(?<version>v\d+|\w{1,2})\/(?<publicId>[^\s]+)$/,Fr=["images","videos","files"],Wr="res.cloudinary.com";function Ft(r){var l,f,x,E;if(typeof r!="string")throw new Error("Failed to parse URL - Invalid src: Is not a string");if(!Lr.test(r))throw new Error("Failed to parse URL - Invalid src: Does not include version (Ex: /v1234/)");const[t,n]=r.split("?"),i=Wt(t);let a=t;i&&(a=t.replace(new RegExp(`${i}$`),""));const o=a.match(Br),c=(f=(l=o==null?void 0:o.groups)==null?void 0:l.transformations)==null?void 0:f.split("/").filter(S=>!!S),u={...o==null?void 0:o.groups,format:i,seoSuffix:void 0,transformations:c||[],queryParams:{},version:(x=o==null?void 0:o.groups)!=null&&x.version?parseInt(o.groups.version.replace("v","")):void 0};if(u.host===Wr&&!u.cloudName)throw new Error("Failed to parse URL - Invalid src: Cloudinary URL delivered from res.cloudinary.com must include Cloud Name (ex: res.cloudinary.com/<Cloud Name>/image/...)");if(n&&(u.queryParams=n.split("&").reduce((S,j)=>{const[N,q]=j.split("=");return S[N]=q,S},{})),u.assetType&&Fr.includes(u.assetType)){const S=((E=u.publicId)==null?void 0:E.split("/"))||[];u.seoSuffix=S.pop(),u.publicId=S.join("/")}return u.publicId&&(u.publicId=decodeURIComponent(u.publicId)),u}function Hr(r){const{transformations:e=[]}=Ft(r)||{};return e.map(t=>t.split(","))}function Wt(r){const e=r.match(Ur);if(e!==null)return e[0]}function Yr(r){return typeof r!="string"?!1:!!r.startsWith("#")}function Qr(r){return`rgb:${r.replace("#","")}`}function Gr(r){if(typeof btoa=="function")return btoa(r);if(typeof Buffer<"u")return Buffer.from(r).toString("base64")}function H(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Kr(r=[],e,t="asc"){function n(a,o){let c=a[e],u=o[e];return typeof c=="string"&&(c=c.toLowerCase()),typeof u=="string"&&(u=u.toLowerCase()),c<u?-1:c>u?1:0}let i=[...r];return i=i.sort(n),t==="desc"?i.reverse():i}var w;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},r.getValidEnumValues=i=>{const a=r.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return r.objectValues(o)},r.objectValues=i=>r.objectKeys(i).map(function(a){return i[a]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},r.find=(i,a)=>{for(const o of i)if(a(o))return o},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}r.joinValues=n,r.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(w||(w={}));var yt;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(yt||(yt={}));const h=w.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Q=r=>{switch(typeof r){case"undefined":return h.undefined;case"string":return h.string;case"number":return isNaN(r)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":return Array.isArray(r)?h.array:r===null?h.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?h.promise:typeof Map<"u"&&r instanceof Map?h.map:typeof Set<"u"&&r instanceof Set?h.set:typeof Date<"u"&&r instanceof Date?h.date:h.object;default:return h.unknown}},d=w.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xr=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class M extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let c=n,u=0;for(;u<o.path.length;){const l=o.path[u];u===o.path.length-1?(c[l]=c[l]||{_errors:[]},c[l]._errors.push(t(o))):c[l]=c[l]||{_errors:[]},c=c[l],u++}}};return i(this),n}static assert(e){if(!(e instanceof M))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,w.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}M.create=r=>new M(r);const ye=(r,e)=>{let t;switch(r.code){case d.invalid_type:r.received===h.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case d.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,w.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:t=`Unrecognized key(s) in object: ${w.joinValues(r.keys,", ")}`;break;case d.invalid_union:t="Invalid input";break;case d.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${w.joinValues(r.options)}`;break;case d.invalid_enum_value:t=`Invalid enum value. Expected ${w.joinValues(r.options)}, received '${r.received}'`;break;case d.invalid_arguments:t="Invalid function arguments";break;case d.invalid_return_type:t="Invalid function return type";break;case d.invalid_date:t="Invalid date";break;case d.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:w.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case d.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case d.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case d.custom:t="Invalid input";break;case d.invalid_intersection_types:t="Intersection results could not be merged";break;case d.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case d.not_finite:t="Number must be finite";break;default:t=e.defaultError,w.assertNever(r)}return{message:t}};let Ht=ye;function en(r){Ht=r}function Ge(){return Ht}const Ke=r=>{const{data:e,path:t,errorMaps:n,issueData:i}=r,a=[...t,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const u=n.filter(l=>!!l).slice().reverse();for(const l of u)c=l(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}},tn=[];function p(r,e){const t=Ge(),n=Ke({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===ye?void 0:ye].filter(i=>!!i)});r.common.issues.push(n)}class ${constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if(i.status==="aborted")return _;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const i of t){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return $.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return _;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const _=Object.freeze({status:"aborted"}),he=r=>({status:"dirty",value:r}),P=r=>({status:"valid",value:r}),_t=r=>r.status==="aborted",vt=r=>r.status==="dirty",Oe=r=>r.status==="valid",Ae=r=>typeof Promise<"u"&&r instanceof Promise;function Xe(r,e,t,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function Yt(r,e,t,n,i){if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var m;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(m||(m={}));var we,Te;class L{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Nt=(r,e)=>{if(Oe(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new M(r.common.issues);return this._error=t,this._error}}};function v(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{var u,l;const{message:f}=r;return o.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(u=f??n)!==null&&u!==void 0?u:c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:(l=f??t)!==null&&l!==void 0?l:c.defaultError}},description:i}}class b{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Q(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $,ctx:{common:e.parent.common,data:e.data,parsedType:Q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ae(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const i={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Q(e)},a=this._parseSync({data:e,path:i.path,parent:i});return Nt(i,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Q(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Ae(i)?i:Promise.resolve(i));return Nt(n,a)}refine(e,t){const n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:d.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new z({schema:this,typeName:y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return J.create(this,this._def)}nullable(){return re.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return D.create(this,this._def)}promise(){return ve.create(this,this._def)}or(e){return je.create([this,e],this._def)}and(e){return Re.create(this,e,this._def)}transform(e){return new z({...v(this._def),schema:this,typeName:y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Me({...v(this._def),innerType:this,defaultValue:t,typeName:y.ZodDefault})}brand(){return new xt({typeName:y.ZodBranded,type:this,...v(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new qe({...v(this._def),innerType:this,catchValue:t,typeName:y.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ze.create(this,e)}readonly(){return Ve.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rn=/^c[^\s-]{8,}$/i,nn=/^[0-9a-z]+$/,an=/^[0-9A-HJKMNP-TV-Z]{26}$/,sn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,on=/^[a-z0-9_-]{21}$/i,cn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ln=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,un="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pt;const dn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,pn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hn=new RegExp(`^${Qt}$`);function Gt(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function mn(r){return new RegExp(`^${Gt(r)}$`)}function Kt(r){let e=`${Qt}T${Gt(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function gn(r,e){return!!((e==="v4"||!e)&&dn.test(r)||(e==="v6"||!e)&&fn.test(r))}class V extends b{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.string){const a=this._getOrReturnCtx(e);return p(a,{code:d.invalid_type,expected:h.string,received:a.parsedType}),_}const n=new $;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),p(i,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),p(i,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?p(i,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&p(i,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")ln.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"email",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")pt||(pt=new RegExp(un,"u")),pt.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"emoji",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")sn.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"uuid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")on.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"nanoid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")rn.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"cuid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")nn.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"cuid2",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")an.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"ulid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),p(i,{validation:"url",code:d.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"regex",code:d.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),p(i,{code:d.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),p(i,{code:d.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),p(i,{code:d.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Kt(a).test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{code:d.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?hn.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{code:d.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?mn(a).test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{code:d.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?cn.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"duration",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?gn(e.data,a.version)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"ip",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?pn.test(e.data)||(i=this._getOrReturnCtx(e,i),p(i,{validation:"base64",code:d.invalid_string,message:a.message}),n.dirty()):w.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:d.invalid_string,...m.errToObj(n)})}_addCheck(e){return new V({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...m.errToObj(e)})}url(e){return this._addCheck({kind:"url",...m.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...m.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...m.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...m.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...m.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...m.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...m.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...m.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...m.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...m.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...m.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...m.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...m.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...m.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...m.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...m.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...m.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...m.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...m.errToObj(t)})}nonempty(e){return this.min(1,m.errToObj(e))}trim(){return new V({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new V({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new V({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}V.create=r=>{var e;return new V({checks:[],typeName:y.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...v(r)})};function yn(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,a=parseInt(r.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class X extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.number){const a=this._getOrReturnCtx(e);return p(a,{code:d.invalid_type,expected:h.number,received:a.parsedType}),_}let n;const i=new $;for(const a of this._def.checks)a.kind==="int"?w.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:d.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:d.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:d.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?yn(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),p(n,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:d.not_finite,message:a.message}),i.dirty()):w.assertNever(a);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,m.toString(t))}gt(e,t){return this.setLimit("min",e,!1,m.toString(t))}lte(e,t){return this.setLimit("max",e,!0,m.toString(t))}lt(e,t){return this.setLimit("max",e,!1,m.toString(t))}setLimit(e,t,n,i){return new X({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:m.toString(i)}]})}_addCheck(e){return new X({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:m.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:m.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:m.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:m.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:m.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:m.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:m.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:m.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:m.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&w.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}X.create=r=>new X({checks:[],typeName:y.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...v(r)});class ee extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==h.bigint){const a=this._getOrReturnCtx(e);return p(a,{code:d.invalid_type,expected:h.bigint,received:a.parsedType}),_}let n;const i=new $;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:d.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:d.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),p(n,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):w.assertNever(a);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,m.toString(t))}gt(e,t){return this.setLimit("min",e,!1,m.toString(t))}lte(e,t){return this.setLimit("max",e,!0,m.toString(t))}lt(e,t){return this.setLimit("max",e,!1,m.toString(t))}setLimit(e,t,n,i){return new ee({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:m.toString(i)}]})}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:m.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:m.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:m.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:m.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:m.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ee.create=r=>{var e;return new ee({checks:[],typeName:y.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...v(r)})};class Ne extends b{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==h.boolean){const n=this._getOrReturnCtx(e);return p(n,{code:d.invalid_type,expected:h.boolean,received:n.parsedType}),_}return P(e.data)}}Ne.create=r=>new Ne({typeName:y.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...v(r)});class se extends b{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.date){const a=this._getOrReturnCtx(e);return p(a,{code:d.invalid_type,expected:h.date,received:a.parsedType}),_}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return p(a,{code:d.invalid_date}),_}const n=new $;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),p(i,{code:d.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),p(i,{code:d.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):w.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new se({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:m.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:m.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}se.create=r=>new se({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:y.ZodDate,...v(r)});class et extends b{_parse(e){if(this._getType(e)!==h.symbol){const n=this._getOrReturnCtx(e);return p(n,{code:d.invalid_type,expected:h.symbol,received:n.parsedType}),_}return P(e.data)}}et.create=r=>new et({typeName:y.ZodSymbol,...v(r)});class Ce extends b{_parse(e){if(this._getType(e)!==h.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:d.invalid_type,expected:h.undefined,received:n.parsedType}),_}return P(e.data)}}Ce.create=r=>new Ce({typeName:y.ZodUndefined,...v(r)});class Ee extends b{_parse(e){if(this._getType(e)!==h.null){const n=this._getOrReturnCtx(e);return p(n,{code:d.invalid_type,expected:h.null,received:n.parsedType}),_}return P(e.data)}}Ee.create=r=>new Ee({typeName:y.ZodNull,...v(r)});class _e extends b{constructor(){super(...arguments),this._any=!0}_parse(e){return P(e.data)}}_e.create=r=>new _e({typeName:y.ZodAny,...v(r)});class ae extends b{constructor(){super(...arguments),this._unknown=!0}_parse(e){return P(e.data)}}ae.create=r=>new ae({typeName:y.ZodUnknown,...v(r)});class Y extends b{_parse(e){const t=this._getOrReturnCtx(e);return p(t,{code:d.invalid_type,expected:h.never,received:t.parsedType}),_}}Y.create=r=>new Y({typeName:y.ZodNever,...v(r)});class tt extends b{_parse(e){if(this._getType(e)!==h.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:d.invalid_type,expected:h.void,received:n.parsedType}),_}return P(e.data)}}tt.create=r=>new tt({typeName:y.ZodVoid,...v(r)});class D extends b{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==h.array)return p(t,{code:d.invalid_type,expected:h.array,received:t.parsedType}),_;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,c=t.data.length<i.exactLength.value;(o||c)&&(p(t,{code:o?d.too_big:d.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(p(t,{code:d.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(p(t,{code:d.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,c)=>i.type._parseAsync(new L(t,o,t.path,c)))).then(o=>$.mergeArray(n,o));const a=[...t.data].map((o,c)=>i.type._parseSync(new L(t,o,t.path,c)));return $.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new D({...this._def,minLength:{value:e,message:m.toString(t)}})}max(e,t){return new D({...this._def,maxLength:{value:e,message:m.toString(t)}})}length(e,t){return new D({...this._def,exactLength:{value:e,message:m.toString(t)}})}nonempty(e){return this.min(1,e)}}D.create=(r,e)=>new D({type:r,minLength:null,maxLength:null,exactLength:null,typeName:y.ZodArray,...v(e)});function pe(r){if(r instanceof O){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=J.create(pe(n))}return new O({...r._def,shape:()=>e})}else return r instanceof D?new D({...r._def,type:pe(r.element)}):r instanceof J?J.create(pe(r.unwrap())):r instanceof re?re.create(pe(r.unwrap())):r instanceof U?U.create(r.items.map(e=>pe(e))):r}class O extends b{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=w.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==h.object){const l=this._getOrReturnCtx(e);return p(l,{code:d.invalid_type,expected:h.object,received:l.parsedType}),_}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Y&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||c.push(l);const u=[];for(const l of o){const f=a[l],x=i.data[l];u.push({key:{status:"valid",value:l},value:f._parse(new L(i,x,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Y){const l=this._def.unknownKeys;if(l==="passthrough")for(const f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(l==="strict")c.length>0&&(p(i,{code:d.unrecognized_keys,keys:c}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const f of c){const x=i.data[f];u.push({key:{status:"valid",value:f},value:l._parse(new L(i,x,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const f of u){const x=await f.key,E=await f.value;l.push({key:x,value:E,alwaysSet:f.alwaysSet})}return l}).then(l=>$.mergeObjectSync(n,l)):$.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return m.errToObj,new O({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,a,o,c;const u=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(c=m.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new O({...this._def,unknownKeys:"strip"})}passthrough(){return new O({...this._def,unknownKeys:"passthrough"})}extend(e){return new O({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new O({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:y.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new O({...this._def,catchall:e})}pick(e){const t={};return w.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new O({...this._def,shape:()=>t})}omit(e){const t={};return w.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new O({...this._def,shape:()=>t})}deepPartial(){return pe(this)}partial(e){const t={};return w.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new O({...this._def,shape:()=>t})}required(e){const t={};return w.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof J;)a=a._def.innerType;t[n]=a}}),new O({...this._def,shape:()=>t})}keyof(){return Xt(w.objectKeys(this.shape))}}O.create=(r,e)=>new O({shape:()=>r,unknownKeys:"strip",catchall:Y.create(),typeName:y.ZodObject,...v(e)});O.strictCreate=(r,e)=>new O({shape:()=>r,unknownKeys:"strict",catchall:Y.create(),typeName:y.ZodObject,...v(e)});O.lazycreate=(r,e)=>new O({shape:r,unknownKeys:"strip",catchall:Y.create(),typeName:y.ZodObject,...v(e)});class je extends b{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new M(c.ctx.common.issues));return p(t,{code:d.invalid_union,unionErrors:o}),_}if(t.common.async)return Promise.all(n.map(async a=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const u of n){const l={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:l});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(u=>new M(u));return p(t,{code:d.invalid_union,unionErrors:c}),_}}get options(){return this._def.options}}je.create=(r,e)=>new je({options:r,typeName:y.ZodUnion,...v(e)});const W=r=>r instanceof Pe?W(r.schema):r instanceof z?W(r.innerType()):r instanceof Ie?[r.value]:r instanceof te?r.options:r instanceof Ze?w.objectValues(r.enum):r instanceof Me?W(r._def.innerType):r instanceof Ce?[void 0]:r instanceof Ee?[null]:r instanceof J?[void 0,...W(r.unwrap())]:r instanceof re?[null,...W(r.unwrap())]:r instanceof xt||r instanceof Ve?W(r.unwrap()):r instanceof qe?W(r._def.innerType):[];class ot extends b{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.object)return p(t,{code:d.invalid_type,expected:h.object,received:t.parsedType}),_;const n=this.discriminator,i=t.data[n],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(p(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const i=new Map;for(const a of t){const o=W(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,a)}}return new ot({typeName:y.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...v(n)})}}function bt(r,e){const t=Q(r),n=Q(e);if(r===e)return{valid:!0,data:r};if(t===h.object&&n===h.object){const i=w.objectKeys(e),a=w.objectKeys(r).filter(c=>i.indexOf(c)!==-1),o={...r,...e};for(const c of a){const u=bt(r[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(t===h.array&&n===h.array){if(r.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<r.length;a++){const o=r[a],c=e[a],u=bt(o,c);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===h.date&&n===h.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Re extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(a,o)=>{if(_t(a)||_t(o))return _;const c=bt(a.value,o.value);return c.valid?((vt(a)||vt(o))&&t.dirty(),{status:t.value,value:c.data}):(p(n,{code:d.invalid_intersection_types}),_)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Re.create=(r,e,t)=>new Re({left:r,right:e,typeName:y.ZodIntersection,...v(t)});class U extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.array)return p(n,{code:d.invalid_type,expected:h.array,received:n.parsedType}),_;if(n.data.length<this._def.items.length)return p(n,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;!this._def.rest&&n.data.length>this._def.items.length&&(p(n,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new L(n,o,n.path,c)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>$.mergeArray(t,o)):$.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new U({...this._def,rest:e})}}U.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new U({items:r,typeName:y.ZodTuple,rest:null,...v(e)})};class $e extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.object)return p(n,{code:d.invalid_type,expected:h.object,received:n.parsedType}),_;const i=[],a=this._def.keyType,o=this._def.valueType;for(const c in n.data)i.push({key:a._parse(new L(n,c,n.path,c)),value:o._parse(new L(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?$.mergeObjectAsync(t,i):$.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof b?new $e({keyType:e,valueType:t,typeName:y.ZodRecord,...v(n)}):new $e({keyType:V.create(),valueType:e,typeName:y.ZodRecord,...v(t)})}}class rt extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.map)return p(n,{code:d.invalid_type,expected:h.map,received:n.parsedType}),_;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([c,u],l)=>({key:i._parse(new L(n,c,n.path,[l,"key"])),value:a._parse(new L(n,u,n.path,[l,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const l=await u.key,f=await u.value;if(l.status==="aborted"||f.status==="aborted")return _;(l.status==="dirty"||f.status==="dirty")&&t.dirty(),c.set(l.value,f.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const u of o){const l=u.key,f=u.value;if(l.status==="aborted"||f.status==="aborted")return _;(l.status==="dirty"||f.status==="dirty")&&t.dirty(),c.set(l.value,f.value)}return{status:t.value,value:c}}}}rt.create=(r,e,t)=>new rt({valueType:e,keyType:r,typeName:y.ZodMap,...v(t)});class oe extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.set)return p(n,{code:d.invalid_type,expected:h.set,received:n.parsedType}),_;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(p(n,{code:d.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(p(n,{code:d.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function o(u){const l=new Set;for(const f of u){if(f.status==="aborted")return _;f.status==="dirty"&&t.dirty(),l.add(f.value)}return{status:t.value,value:l}}const c=[...n.data.values()].map((u,l)=>a._parse(new L(n,u,n.path,l)));return n.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,t){return new oe({...this._def,minSize:{value:e,message:m.toString(t)}})}max(e,t){return new oe({...this._def,maxSize:{value:e,message:m.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}oe.create=(r,e)=>new oe({valueType:r,minSize:null,maxSize:null,typeName:y.ZodSet,...v(e)});class ge extends b{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.function)return p(t,{code:d.invalid_type,expected:h.function,received:t.parsedType}),_;function n(c,u){return Ke({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ge(),ye].filter(l=>!!l),issueData:{code:d.invalid_arguments,argumentsError:u}})}function i(c,u){return Ke({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ge(),ye].filter(l=>!!l),issueData:{code:d.invalid_return_type,returnTypeError:u}})}const a={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof ve){const c=this;return P(async function(...u){const l=new M([]),f=await c._def.args.parseAsync(u,a).catch(S=>{throw l.addIssue(n(u,S)),l}),x=await Reflect.apply(o,this,f);return await c._def.returns._def.type.parseAsync(x,a).catch(S=>{throw l.addIssue(i(x,S)),l})})}else{const c=this;return P(function(...u){const l=c._def.args.safeParse(u,a);if(!l.success)throw new M([n(u,l.error)]);const f=Reflect.apply(o,this,l.data),x=c._def.returns.safeParse(f,a);if(!x.success)throw new M([i(f,x.error)]);return x.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ge({...this._def,args:U.create(e).rest(ae.create())})}returns(e){return new ge({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ge({args:e||U.create([]).rest(ae.create()),returns:t||ae.create(),typeName:y.ZodFunction,...v(n)})}}class Pe extends b{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Pe.create=(r,e)=>new Pe({getter:r,typeName:y.ZodLazy,...v(e)});class Ie extends b{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return p(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ie.create=(r,e)=>new Ie({value:r,typeName:y.ZodLiteral,...v(e)});function Xt(r,e){return new te({values:r,typeName:y.ZodEnum,...v(e)})}class te extends b{constructor(){super(...arguments),we.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{expected:w.joinValues(n),received:t.parsedType,code:d.invalid_type}),_}if(Xe(this,we)||Yt(this,we,new Set(this._def.values)),!Xe(this,we).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{received:t.data,code:d.invalid_enum_value,options:n}),_}return P(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return te.create(e,{...this._def,...t})}exclude(e,t=this._def){return te.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}we=new WeakMap;te.create=Xt;class Ze extends b{constructor(){super(...arguments),Te.set(this,void 0)}_parse(e){const t=w.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==h.string&&n.parsedType!==h.number){const i=w.objectValues(t);return p(n,{expected:w.joinValues(i),received:n.parsedType,code:d.invalid_type}),_}if(Xe(this,Te)||Yt(this,Te,new Set(w.getValidEnumValues(this._def.values))),!Xe(this,Te).has(e.data)){const i=w.objectValues(t);return p(n,{received:n.data,code:d.invalid_enum_value,options:i}),_}return P(e.data)}get enum(){return this._def.values}}Te=new WeakMap;Ze.create=(r,e)=>new Ze({values:r,typeName:y.ZodNativeEnum,...v(e)});class ve extends b{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.promise&&t.common.async===!1)return p(t,{code:d.invalid_type,expected:h.promise,received:t.parsedType}),_;const n=t.parsedType===h.promise?t.data:Promise.resolve(t.data);return P(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ve.create=(r,e)=>new ve({type:r,typeName:y.ZodPromise,...v(e)});class z extends b{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{p(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async c=>{if(t.value==="aborted")return _;const u=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return u.status==="aborted"?_:u.status==="dirty"||t.value==="dirty"?he(u.value):u});{if(t.value==="aborted")return _;const c=this._def.schema._parseSync({data:o,path:n.path,parent:n});return c.status==="aborted"?_:c.status==="dirty"||t.value==="dirty"?he(c.value):c}}if(i.type==="refinement"){const o=c=>{const u=i.refinement(c,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?_:(c.status==="dirty"&&t.dirty(),o(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?_:(c.status==="dirty"&&t.dirty(),o(c.value).then(()=>({status:t.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Oe(o))return o;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Oe(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:t.value,value:c})):o);w.assertNever(i)}}z.create=(r,e,t)=>new z({schema:r,typeName:y.ZodEffects,effect:e,...v(t)});z.createWithPreprocess=(r,e,t)=>new z({schema:e,effect:{type:"preprocess",transform:r},typeName:y.ZodEffects,...v(t)});class J extends b{_parse(e){return this._getType(e)===h.undefined?P(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}J.create=(r,e)=>new J({innerType:r,typeName:y.ZodOptional,...v(e)});class re extends b{_parse(e){return this._getType(e)===h.null?P(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}re.create=(r,e)=>new re({innerType:r,typeName:y.ZodNullable,...v(e)});class Me extends b{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===h.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Me.create=(r,e)=>new Me({innerType:r,typeName:y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...v(e)});class qe extends b{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ae(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new M(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new M(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}qe.create=(r,e)=>new qe({innerType:r,typeName:y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...v(e)});class nt extends b{_parse(e){if(this._getType(e)!==h.nan){const n=this._getOrReturnCtx(e);return p(n,{code:d.invalid_type,expected:h.nan,received:n.parsedType}),_}return{status:"valid",value:e.data}}}nt.create=r=>new nt({typeName:y.ZodNaN,...v(r)});const _n=Symbol("zod_brand");class xt extends b{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ze extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?_:a.status==="dirty"?(t.dirty(),he(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new ze({in:e,out:t,typeName:y.ZodPipeline})}}class Ve extends b{_parse(e){const t=this._def.innerType._parse(e),n=i=>(Oe(i)&&(i.value=Object.freeze(i.value)),i);return Ae(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}}Ve.create=(r,e)=>new Ve({innerType:r,typeName:y.ZodReadonly,...v(e)});function er(r,e={},t){return r?_e.create().superRefine((n,i)=>{var a,o;if(!r(n)){const c=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(o=(a=c.fatal)!==null&&a!==void 0?a:t)!==null&&o!==void 0?o:!0,l=typeof c=="string"?{message:c}:c;i.addIssue({code:"custom",...l,fatal:u})}}):_e.create()}const vn={object:O.lazycreate};var y;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(y||(y={}));const bn=(r,e={message:`Input not instance of ${r.name}`})=>er(t=>t instanceof r,e),tr=V.create,rr=X.create,xn=nt.create,wn=ee.create,nr=Ne.create,Tn=se.create,Sn=et.create,kn=Ce.create,On=Ee.create,An=_e.create,Nn=ae.create,Cn=Y.create,En=tt.create,jn=D.create,Rn=O.create,$n=O.strictCreate,Pn=je.create,In=ot.create,Zn=Re.create,Mn=U.create,qn=$e.create,Vn=rt.create,Dn=oe.create,zn=ge.create,Jn=Pe.create,Ln=Ie.create,Un=te.create,Bn=Ze.create,Fn=ve.create,Ct=z.create,Wn=J.create,Hn=re.create,Yn=z.createWithPreprocess,Qn=ze.create,Gn=()=>tr().optional(),Kn=()=>rr().optional(),Xn=()=>nr().optional(),ei={string:r=>V.create({...r,coerce:!0}),number:r=>X.create({...r,coerce:!0}),boolean:r=>Ne.create({...r,coerce:!0}),bigint:r=>ee.create({...r,coerce:!0}),date:r=>se.create({...r,coerce:!0})},ti=_;var s=Object.freeze({__proto__:null,defaultErrorMap:ye,setErrorMap:en,getErrorMap:Ge,makeIssue:Ke,EMPTY_PATH:tn,addIssueToContext:p,ParseStatus:$,INVALID:_,DIRTY:he,OK:P,isAborted:_t,isDirty:vt,isValid:Oe,isAsync:Ae,get util(){return w},get objectUtil(){return yt},ZodParsedType:h,getParsedType:Q,ZodType:b,datetimeRegex:Kt,ZodString:V,ZodNumber:X,ZodBigInt:ee,ZodBoolean:Ne,ZodDate:se,ZodSymbol:et,ZodUndefined:Ce,ZodNull:Ee,ZodAny:_e,ZodUnknown:ae,ZodNever:Y,ZodVoid:tt,ZodArray:D,ZodObject:O,ZodUnion:je,ZodDiscriminatedUnion:ot,ZodIntersection:Re,ZodTuple:U,ZodRecord:$e,ZodMap:rt,ZodSet:oe,ZodFunction:ge,ZodLazy:Pe,ZodLiteral:Ie,ZodEnum:te,ZodNativeEnum:Ze,ZodPromise:ve,ZodEffects:z,ZodTransformer:z,ZodOptional:J,ZodNullable:re,ZodDefault:Me,ZodCatch:qe,ZodNaN:nt,BRAND:_n,ZodBranded:xt,ZodPipeline:ze,ZodReadonly:Ve,custom:er,Schema:b,ZodSchema:b,late:vn,get ZodFirstPartyTypeKind(){return y},coerce:ei,any:An,array:jn,bigint:wn,boolean:nr,date:Tn,discriminatedUnion:In,effect:Ct,enum:Un,function:zn,instanceof:bn,intersection:Zn,lazy:Jn,literal:Ln,map:Vn,nan:xn,nativeEnum:Bn,never:Cn,null:On,nullable:Hn,number:rr,object:Rn,oboolean:Xn,onumber:Kn,optional:Wn,ostring:Gn,pipeline:Qn,preprocess:Yn,promise:Fn,record:qn,set:Dn,strictObject:$n,string:tr,symbol:Sn,transformer:Ct,tuple:Mn,undefined:kn,union:Pn,unknown:Nn,void:En,NEVER:ti,ZodIssueCode:d,quotelessJson:Xr,ZodError:M});function ri(r){return!(typeof r!="object"||r instanceof Array)}class ni{filterOutNonSupportedKeys(e,t){const n=Object.create({});return ri(e)?(Object.keys(e).forEach(i=>{t.indexOf(i)>=0?n[i]=e[i]:console.warn("Warning - unsupported key provided to configuration: ",i)}),n):Object.create({})}}const Et=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics","queryParams"];class wt extends ni{constructor(e){super();const t=this.filterOutNonSupportedKeys(e,Et);Object.assign(this,{secure:!0},t)}extend(e){const t=this.filterOutNonSupportedKeys(e,Et);return new wt(Object.assign({},this,t))}setCname(e){return this.cname=e,this}setSecureDistribution(e){return this.secureDistribution=e,this}setPrivateCdn(e){return this.privateCdn=e,this}setSignUrl(e){return this.signUrl=e,this}setLongUrlSignature(e){return this.longUrlSignature=e,this}setShorten(e){return this.shorten=e,this}setUseRootPath(e){return this.useRootPath=e,this}setSecure(e){return this.secure=e,this}setForceVersion(e){return this.forceVersion=e,this}setQueryParams(e){return this.queryParams=e,this}}class De{constructor(e){this.values=[],this.delimiter=":",this.hasValue(e)&&this.addValue(e)}toString(){return this.values.join(this.delimiter)}hasValue(e){return typeof e<"u"&&e!==null&&e!==""}addValue(e){return Array.isArray(e)?this.values=this.values.concat(e):this.values.push(e),this.values=this.values.filter(t=>this.hasValue(t)),this}setDelimiter(e){return this.delimiter=e,this}}class ii extends Error{constructor(e="Unsupported"){super(e)}}function Tt(r){return new ii(r)}function ai(){return this._qualifierModel||{error:Tt(`unsupported qualifier ${this.constructor.name}`)}}class si{constructor(){this._qualifierModel={}}toJson(){return ai.apply(this)}}class ct extends si{constructor(e,t){super(),this.delimiter="_",this.key=e,t instanceof De?this.qualifierValue=t:(this.qualifierValue=new De,this.qualifierValue.addValue(t))}toString(){const{key:e,delimiter:t,qualifierValue:n}=this;return`${e}${t}${n.toString()}`}addValue(e){return this.qualifierValue.addValue(e),this}}class K extends ct{constructor(e,t){let n;t?n=new De([e,`${t}`]).setDelimiter(":"):n=e,super("fl",n),this.flagValue=t}toString(){return super.toString().replace(/\./g,"%2E")}getFlagValue(){return this.flagValue}}function oi(r,e){const t=Array.from(r.entries());return e.forEach(n=>{t.push(["fl",n])}),t.sort().map(n=>n[1])}function ci(){var r,e,t;const n=this._actionModel&&Object.keys(this._actionModel).length,i=(t=(e=(r=this._actionModel)===null||r===void 0?void 0:r.source)===null||e===void 0?void 0:e.transformation)===null||t===void 0?void 0:t.error;return i&&i instanceof Error?{error:i}:n?this._actionModel:{error:Tt(`unsupported action ${this.constructor.name}`)}}class li{constructor(){this._actionModel={}}toJson(){return ci.apply(this)}}class St extends li{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(e){return this.actionTag=e,this}toString(){return this.prepareQualifiers(),oi(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(e){if(typeof e=="string"){const[t,n]=e.toLowerCase().split("_");t==="fl"?this.flags.push(new K(n)):this.qualifiers.set(t,new ct(t,n))}else this.qualifiers.set(e.key,e);return this}addFlag(e){return typeof e=="string"?this.flags.push(new K(e)):e instanceof K&&this.flags.push(e),this}addValueToQualifier(e,t){return this.qualifiers.get(e).addValue(t),this}}function ui(r){return r&&(r.match(/^#/)?`rgb:${r.substr(1)}`:r)}class di extends St{constructor(e){super(),this._actionModel={},this.addQualifier(new ct("b",new De(ui(e)).setDelimiter("_"))),this._actionModel.color=e,this._actionModel.actionType="backgroundColor"}static fromJson(e){const{color:t}=e;return new this(t)}}class jt{constructor(e){this.raw=e}toString(){return this.raw}toJson(){return{error:Tt(`unsupported action ${this.constructor.name}`)}}}function fi(r){const e=r;return"error"in e&&!!e.error}function pi(){return new K("lossy")}function hi(){return new K("preserve_transparency")}function mi(r){return new K("progressive",r)}class gi extends De{constructor(e){super(e),this.val=e}getValue(){return this.val}}function le(r){const e={};return Object.keys(r).forEach(t=>{e[r[t]]=t}),e}const yi={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad",autoPad:"auto_pad"},_i={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},vi={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent",generativeRestore:"gen_restore",upscale:"upscale"},bi={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},xi={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},wi={444:"CHROMA_444",420:"CHROMA_420"},Ti={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"};le(wi);le(Ti);le(yi);const Si=le(_i);le(vi);le(bi);le(xi);class ki extends St{constructor(e,t,n){super(),this._actionModel={};let i;t instanceof gi?i=t.getValue():i=t,this._actionModel.actionType=Si[e],this._actionModel[n]=i,this.addQualifier(new ct(e,t))}}class Oi extends K{constructor(e){super("progressive",e)}}class it extends ki{constructor(e,t){super(e,t,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(pi()),this}progressive(e){return e instanceof Oi?(this._actionModel.progressive={mode:e.getFlagValue()},this.addFlag(e)):(this._actionModel.progressive={mode:e},this.addFlag(mi(e))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(hi()),this}static fromJson(e){const{formatType:t,lossy:n,progressive:i,preserveTransparency:a}=e;let o;return t?o=new this("f",t):o=new this("f"),i&&(i.mode?o.progressive(i.mode):o.progressive()),n&&o.lossy(),a&&o.preserveTransparency(),o}}class lt{constructor(){this.actions=[]}addAction(e){let t;if(typeof e=="string"){if(e.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";t=new jt(e)}else t=e;return this.actions.push(t),this}addTransformation(e){return e instanceof lt?this.actions=this.actions.concat(e.actions):this.actions.push(new jt(e)),this}toString(){return this.actions.map(e=>e.toString()).filter(e=>e).join("/")}animated(e){return this.addAction(e)}border(e){return this.addAction(e)}reshape(e){return this.addAction(e)}resize(e){return this.addAction(e)}quality(e){return this.addAction(new it("q",e)),this}format(e){return this.addAction(new it("f",e)),this}roundCorners(e){return this.addAction(e)}overlay(e){return this.addAction(e)}underlay(e){return e.setLayerType("u"),this.addAction(e)}addVariable(e){return this.addAction(e)}conditional(e){return this.addAction(e)}effect(e){return this.addAction(e)}adjust(e){return this.addAction(e)}rotate(e){return this.addAction(e)}namedTransformation(e){return this.addAction(e)}delivery(e){return this.addAction(e)}backgroundColor(e){return this.addAction(new di(e))}psdTools(e){return this.addAction(e)}extract(e){return this.addAction(e)}addFlag(e){const t=new St;let n=e;return typeof e=="string"&&(n=new K(e)),t.addQualifier(n),this.addAction(t)}customFunction(e){return this.addAction(e)}transcode(e){return this.addAction(e)}videoEdit(e){return this.addAction(e)}toJson(){const e=[];for(const t of this.actions){const n=t.toJson();if(fi(n))return n;e.push(n)}return{actions:e}}}class Ai extends lt{}class Ni extends lt{}function Ci(r){return r.match(/^https?:\//)}function Ei(r){return r.indexOf("/")<0}function ji(r){return r.match(/^v[0-9]+/)}function Ri(r,e){const t=e.secure,n=e.privateCdn,i=e.cname,a=e.secureDistribution;return!t&&!i?`http://res.cloudinary.com/${r}`:t&&!a&&n?`https://${r}-res.cloudinary.com`:t&&!a?`https://res.cloudinary.com/${r}`:t&&a&&n?`https://${a}`:t&&a?`https://${a}/${r}`:!t&&i?`http://${i}/${r}`:"ERROR"}function $i(r){return r||"image"}function Pi(r){return r||"upload"}function Ii(r,e,t){const n=t!==!1;return e?`v${e}`:ji(r)||Ci(r)||Ei(r)?"":n?"v1":""}function kt(r,e,t){let n=e>>0,i=String(t);return r.length>n?String(r):(n=n-r.length,n>i.length&&(i+=Zi(i,n/i.length)),i.slice(0,n)+String(r))}function Zi(r,e){let t=e,n="";for(;t>0;)n+=r,t--;return n}const Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ir={};let Rt=0;Mi.split("").forEach(r=>{let e=Rt.toString(2);e=kt(e,6,"0"),ir[e]=r,Rt++});function qi(r){if(r.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return r.split(".").reverse().map(e=>{const t=+e;if(isNaN(t)||t<0)throw"Invalid version number provided";return kt(e,2,"0")}).join(".")}function $t(r){let e="";const n=r.split(".").length*6,i=qi(r);let o=parseInt(i.split(".").join("")).toString(2);if(o=kt(o,n,"0"),o.length%6!==0)throw"Version must be smaller than 43.21.26)";return o.match(/.{1,6}/g).forEach(c=>{e+=ir[c]}),e}function Vi(r){const e={sdkSemver:r.sdkSemver,techVersion:r.techVersion,sdkCode:r.sdkCode,product:r.product,feature:"0"};return r.accessibility&&(e.feature="D"),r.lazyload&&(e.feature="C"),r.responsive&&(e.feature="A"),r.placeholder&&(e.feature="B"),e}const Di="1.15.0";function zi(){const r="0.0.0";if(typeof window<"u")return r;try{return process.versions.node||r}catch{return r}}function Ji(r){const e={techVersion:zi(),sdkCode:"T",sdkSemver:Di.split("-")[0],product:"A",responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return r?Object.assign(Object.assign({},e),r):e}function Pt(r){const e=Ji(r),t=Vi(e);try{const n=Li(t.techVersion),i=$t(t.sdkSemver),a=$t(n),o=t.feature,c=t.sdkCode;return`B${t.product}${c}${i}${a}${o}`}catch{return"E"}}function Li(r){const e=r.split(".");return`${e[0]}.${e[1]}`}const It={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"};class Ui{constructor(e,t={},n){this.setPublicID(e),this.setCloudConfig(t),this.setURLConfig(n)}setURLConfig(e){return this.urlConfig=new wt(e),this}setCloudConfig(e){return this.cloudName=e.cloudName,this.apiKey=e.apiKey,this.apiSecret=e.apiSecret,this.authToken=e.authToken,this}setPublicID(e){return this.publicID=e?e.toString():"",this}setDeliveryType(e){return this.deliveryType=e,this}setSuffix(e){return this.suffix=e,this}setSignature(e){return this.signature=e,this}setVersion(e){return e&&(this.version=e),this}setAssetType(e){return e&&(this.assetType=e),this}sign(){return this}toURL(e={}){return this.createCloudinaryURL(null,e.trackedAnalytics)}validateAssetForURLCreation(){if(typeof this.cloudName>"u")throw"You must supply a cloudName when initializing the asset";const e=this.suffix&&this.suffix.indexOf(".")>=0,t=this.suffix&&this.suffix.indexOf("/")>=0;if(e||t)throw"`suffix`` should not include . or /"}getResourceType(){const e=$i(this.assetType),t=Pi(this.deliveryType),n=!!this.suffix,i=`${e}/${t}`,a=It[`${e}/${t}`],o=this.urlConfig.useRootPath,c=this.urlConfig.shorten;if(o){if(i==="image/upload")return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${i} instead`)}if(c&&i==="image/upload")return"iu";if(n){if(a)return a;throw new Error(`URL Suffix only supported for ${Object.keys(It).join(", ")}, Provided: ${i} instead`)}return i}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(e,t){if(!this.publicID)return"";this.validateAssetForURLCreation();const n=Ri(this.cloudName,this.urlConfig),i=e?e.toString():"",a=Ii(this.publicID,this.version,this.urlConfig.forceVersion),o=this.publicID;if(typeof e=="string")return[n,this.getResourceType(),this.getSignature(),i,a,o.replace(/,/g,"%2C"),this.suffix].filter(u=>u).join("/");{const c=[encodeURI(n),this.getResourceType(),this.getSignature(),encodeURI(i),a,encodeURI(o).replace(/,/g,"%2C"),this.suffix&&encodeURI(this.suffix)].filter(f=>f).join("/").replace(/\?/g,"%3F").replace(/=/g,"%3D"),u=this.urlConfig.analytics!==!1&&!o.includes("?");let l="";if(typeof this.urlConfig.queryParams=="object")try{const f=new URLSearchParams(this.urlConfig.queryParams);u&&f.set("_a",Pt(t)),l=f.toString()}catch{console.error("Error: URLSearchParams is not available so the queryParams object cannot be parsed, please try passing as an already parsed string")}else l=this.urlConfig.queryParams||"",u&&(l+=`${l.length>0?"&":""}_a=${Pt(t)}`);return l?`${c}?${l}`:c}}}class ar extends Ui{constructor(e,t,n,i){super(e,t,n),this.transformation=i}animated(e){return this.transformation.animated(e),this}border(e){return this.transformation.border(e),this}reshape(e){return this.transformation.reshape(e),this}resize(e){return this.transformation.resize(e),this}quality(e){return this.addAction(new it("q",e)),this}format(e){return this.addAction(new it("f",e)),this}roundCorners(e){return this.transformation.roundCorners(e),this}overlay(e){return this.transformation.overlay(e),this}addVariable(e){return this.transformation.addVariable(e),this}conditional(e){return this.transformation.conditional(e),this}effect(e){return this.transformation.effect(e),this}adjust(e){return this.transformation.adjust(e),this}rotate(e){return this.transformation.rotate(e),this}namedTransformation(e){return this.transformation.namedTransformation(e),this}delivery(e){return this.transformation.delivery(e),this}backgroundColor(e){return this.transformation.backgroundColor(e),this}psdTools(e){return this.transformation.psdTools(e),this}extract(e){return this.transformation.extract(e),this}addFlag(e){return this.transformation.addFlag(e),this}customFunction(e){return this.transformation.customFunction(e),this}addAction(e){return this.transformation.addAction(e),this}addTransformation(e){return this.transformation.addTransformation(e),this}toString(){return this.transformation.toString()}underlay(e){return this.transformation.underlay(e),this}toURL(e={}){return this.createCloudinaryURL(this.transformation,e==null?void 0:e.trackedAnalytics)}}class Bi extends ar{constructor(e,t,n){super(e,t,n,new Ai)}}class Fi extends ar{constructor(e,t,n){super(e,t,n,new Ni),this.assetType="video"}transcode(e){return this.transformation.transcode(e),this}videoEdit(e){return this.transformation.videoEdit(e),this}}class Wi{constructor(e){e&&(this.cloudinaryConfig=e)}image(e){return new Bi(e,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(e){return new Fi(e,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(e){return this.cloudinaryConfig=e,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}}var Hi={},Yi=Object.defineProperty,Qi=(r,e)=>{for(var t in e)Yi(r,t,{get:e[t],enumerable:!0})},sr={};Qi(sr,{angle:()=>Je,aspectRatio:()=>ut,aspectRatioModesEnum:()=>lr,crop:()=>ue,cropModesEnum:()=>or,extractMode:()=>ur,extractModesEnum:()=>cr,flags:()=>be,flagsEnum:()=>ce,format:()=>ea,gravity:()=>ne,height:()=>Le,multiple:()=>dr,prompt:()=>Se,width:()=>Ue,x:()=>Be,y:()=>Fe,zoom:()=>Ot});var or=s.enum(["auto","crop","fill","fill_pad","fit","imagga_crop","imagga_scale","lfill","limit","lpad","mfit","mpad","pad","scale","thumb"]),cr=s.enum(["content","mask"]),ce=s.enum(["animated","any_format","apng","attachment","awebp","clip","clip_evenodd","cutter","force_icc","force_strip","getinfo","group4","hlsv3","ignore_aspect_ratio","ignore_mask_channels","immutable_cache","keep_attribution","keep_dar","keep_iptc","layer_apply","lossy","mono","no_overflow","no_stream","png8_fl_png24_fl_png32","preserve_transparency","progressive","rasterize","region_relative","relative","replace_image","sanitize","splice","streaming_attachment","strip_profile","text_disallow_overflow","text_no_trim","tiff8_lzw","tiled","truncate_ts","waveform"]),Je={qualifier:"a",schema:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Rotates or flips an asset by the specified number of degrees or automatically according to its orientation or available metadata.",url:"https://cloudinary.com/documentation/transformation_reference#a_angle"}))},lr=s.enum(["vflip","hflip","ignore","auto_right","auto_left"]),Gi=s.union([s.number(),lr,s.intersection(s.string(),s.object({}))]),ut={qualifier:"ar",schema:Gi.describe(JSON.stringify({text:"Crops or resizes the asset to a new aspect ratio.",url:"https://cloudinary.com/documentation/transformation_reference#ar_aspect_ratio"}))},Ki=or,ue={qualifier:"c",schema:Ki.describe(JSON.stringify({text:"Mode to use when cropping an asset.",url:"https://cloudinary.com/documentation/transformation_reference#c_crop_resize"}))},Xi=cr,ur={schema:Xi.default("content").describe(JSON.stringify({text:"Whether to keep the content of the extracted area, or to replace it with a mask.",url:"https://cloudinary.com/documentation/transformation_reference#e_extract"}))},be={qualifier:"fl",schema:s.union([ce,s.array(ce)]).describe(JSON.stringify({text:"Alters the regular behavior of another transformation or the overall delivery behavior.",url:"https://cloudinary.com/documentation/transformation_reference#fl_flag"}))},ea={qualifier:"f",schema:s.string().describe(JSON.stringify({text:"Converts (if necessary) and delivers an asset in the specified format regardless of the file extension used in the delivery URL.",url:"https://cloudinary.com/documentation/transformation_reference#f_format"}))},ta=s.union([s.enum(["auto","auto_content_aware","center","custom","east","face","face_center","multi_face","north","north_east","north_west","south","south_east","south_west","west","xy_center","face:center","face:auto","faces","faces:center","faces:auto","body","body:face","adv_face","adv_faces","adv_eyes","custom:face","custom:faces","custom:adv_face","custom:adv_faces","auto:adv_face","auto:adv_faces","auto:adv_eyes","auto:body","auto:face","auto:faces","auto:custom_no_override","auto:none","liquid","ocr_text"]),s.intersection(s.string(),s.object({}))]),ne={qualifier:"g",schema:ta.describe(JSON.stringify({text:"Determines which part of an asset to focus on. Note: Default of auto is applied for supported crop modes only.",url:"https://cloudinary.com/documentation/transformation_reference#g_gravity"}))},ra=s.union([s.number(),s.string()]),Le={qualifier:"h",schema:ra.describe(JSON.stringify({text:"A qualifier that determines the height of a transformed asset or an overlay.",url:"https://cloudinary.com/documentation/transformation_reference#h_height"}))},na=s.boolean(),dr={schema:na.describe(JSON.stringify({text:"Should generative AI features detect multiple instances."}))},Se={schema:s.string().describe(JSON.stringify({text:"Natural language descriptions used for generative AI capabilities."}))},ia=s.union([s.number(),s.string()]),Ue={qualifier:"w",schema:ia.describe(JSON.stringify({text:"A qualifier that sets the desired width of an asset using a specified value, or automatically based on the available width.",url:"https://cloudinary.com/documentation/transformation_reference#w_width"}))},Be={qualifier:"x",schema:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Adjusts the starting location or offset of the x axis.",url:"https://cloudinary.com/documentation/transformation_reference#x_y_coordinates"}))},Fe={qualifier:"y",schema:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Adjusts the starting location or offset of the y axis.",url:"https://cloudinary.com/documentation/transformation_reference#x_y_coordinates"}))},aa=s.string(),Ot={schema:aa.describe(JSON.stringify({text:"Controls how close to crop to the detected coordinates when using face-detection, custom-coordinate, or object-specific gravity.",url:"https://cloudinary.com/documentation/transformation_reference#z_zoom"}))},fr=[{test:Yr,convert:Qr}],G={aspectRatio:ut,crop:ue,gravity:ne,height:Le,width:Ue},me={angle:Je,gravity:ne,x:Be,y:Fe},ht={alignment:{qualifier:!1,order:6},antialias:{qualifier:"antialias"},border:{qualifier:"bo",location:"primary"},color:{qualifier:"co",location:"primary",converters:fr},fontFamily:{qualifier:!1,order:1},fontSize:{qualifier:!1,order:2},fontStyle:{qualifier:!1,order:4},fontWeight:{qualifier:!1,order:3},hinting:{qualifier:"hinting"},letterSpacing:{qualifier:"letter_spacing"},lineSpacing:{qualifier:"line_spacing"},stroke:{qualifier:"self",order:7},textDecoration:{qualifier:!1,order:5}},g={angle:Je,art:{prefix:"e",qualifier:"art",schema:s.string().describe(JSON.stringify({text:"Applies the selected artistic filter.",url:"https://cloudinary.com/documentation/transformation_reference#e_art"}))},autoBrightness:{prefix:"e",qualifier:"auto_brightness",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Automatically adjusts the image brightness and blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_auto_brightness"}))},autoColor:{prefix:"e",qualifier:"auto_color",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Automatically adjusts the image color balance and blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_auto_color"}))},autoContrast:{prefix:"e",qualifier:"auto_contrast",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Automatically adjusts the image contrast and blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_auto_contrast"}))},assistColorblind:{prefix:"e",qualifier:"assist_colorblind",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies stripes or color adjustment to help people with common color blind conditions to differentiate between colors that are similar for them.",url:"https://cloudinary.com/documentation/transformation_reference#e_assist_colorblind"}))},background:{qualifier:"b",schema:s.string().describe(JSON.stringify({text:"Applies a background to empty or transparent areas.",url:"https://cloudinary.com/documentation/transformation_reference#b_background"}))},blackwhite:{prefix:"e",qualifier:"blackwhite",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Converts an image to black and white.",url:"https://cloudinary.com/documentation/transformation_reference#e_blackwhite"}))},blur:{prefix:"e",qualifier:"blur",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a blurring filter to an asset.",url:"https://cloudinary.com/documentation/transformation_reference#e_blur"}))},blurFaces:{prefix:"e",qualifier:"blur_faces",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Blurs all detected faces in an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_blur_faces"}))},blurRegion:{prefix:"e",qualifier:"blur_region",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a blurring filter to the region of an image specified by x, y, width and height, or an area of text. If no region is specified, the whole image is blurred.",url:"https://cloudinary.com/documentation/transformation_reference#e_blur_region"}))},border:{qualifier:"bo",schema:s.string().describe(JSON.stringify({text:"Adds a solid border around an image or video.",url:"https://cloudinary.com/documentation/transformation_reference#bo_border"}))},brightness:{prefix:"e",qualifier:"brightness",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts the image or video brightness.",url:"https://cloudinary.com/documentation/transformation_reference#e_brightness"}))},brightnessHSB:{prefix:"e",qualifier:"brightness_hsb",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts image brightness modulation in HSB to prevent artifacts in some images.",url:"https://cloudinary.com/documentation/transformation_reference#e_brightness_hsb"}))},cartoonify:{prefix:"e",qualifier:"cartoonify",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a cartoon effect to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_cartoonify"}))},color:{qualifier:"co",schema:s.string().describe(JSON.stringify({text:"A qualifier that specifies the color to use with the corresponding transformation.",url:"https://cloudinary.com/documentation/transformation_reference#co_color"})),converters:fr},colorize:{prefix:"e",qualifier:"colorize",schema:s.string().describe(JSON.stringify({text:"Colorizes an image. By default, gray is used for colorization. You can specify a different color using the color qualifier.",url:"https://cloudinary.com/documentation/transformation_reference#e_colorize"}))},contrast:{prefix:"e",qualifier:"contrast",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts an image or video contrast.",url:"https://cloudinary.com/documentation/transformation_reference#e_contrast"}))},displace:{prefix:"e",qualifier:"distort",schema:s.string().describe(JSON.stringify({text:"Displaces the pixels in an image according to the color channels of the pixels in another specified image (a gradient map specified with the overlay parameter).",url:"https://cloudinary.com/documentation/transformation_reference#e_displace"}))},distort:{prefix:"e",qualifier:"distort",schema:s.string().describe(JSON.stringify({text:"Distorts an image to a new shape by either adjusting its corners or by warping it into an arc.",url:"https://cloudinary.com/documentation/transformation_reference#e_distort"}))},fillLight:{prefix:"e",qualifier:"fill_light",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts the fill light and optionally blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_fill_light"}))},gamma:{prefix:"e",qualifier:"gamma",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts the image or video gamma level.",url:"https://cloudinary.com/documentation/transformation_reference#e_gamma"}))},gradientFade:{prefix:"e",qualifier:"gradient_fade",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a gradient fade effect from the edge of an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_gradient_fade"}))},grayscale:{prefix:"e",qualifier:"grayscale",schema:s.boolean().describe(JSON.stringify({text:"Converts an image to grayscale (multiple shades of gray).",url:"https://cloudinary.com/documentation/transformation_reference#e_grayscale"}))},hue:{prefix:"e",qualifier:"hue",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts an image's hue.",url:"https://cloudinary.com/documentation/transformation_reference#e_hue"}))},improve:{prefix:"e",qualifier:"improve",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts an image's colors, contrast and brightness to improve its appearance.",url:"https://cloudinary.com/documentation/transformation_reference#e_improve"}))},loop:{prefix:"e",qualifier:"loop",schema:s.union([s.boolean(),s.number(),s.string()]).describe(JSON.stringify({text:"Loops a video or animated image the specified number of times.",url:"https://cloudinary.com/documentation/transformation_reference#e_loop"}))},multiply:{prefix:"e",qualifier:"multiply",schema:s.boolean().describe(JSON.stringify({text:"A qualifier that blends image layers using the multiply blend mode",url:"https://cloudinary.com/documentation/transformation_reference#e_multiply"}))},negate:{prefix:"e",qualifier:"negate",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"https://cloudinary.com/documentation/transformation_reference#e_negate",url:"https://cloudinary.com/documentation/transformation_reference#e_negate"}))},noise:{prefix:"e",qualifier:"noise",schema:s.boolean().describe(JSON.stringify({text:"https://cloudinary.com/documentation/transformation_reference#e_noise",url:"https://cloudinary.com/documentation/transformation_reference#e_noise"}))},oilPaint:{prefix:"e",qualifier:"oil_paint",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"https://cloudinary.com/documentation/transformation_reference#e_oil_paint",url:"https://cloudinary.com/documentation/transformation_reference#e_oil_paint"}))},opacity:{qualifier:"o",schema:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Adjusts the opacity of an asset and makes it semi-transparent.",url:"https://cloudinary.com/documentation/transformation_reference#o_opacity"}))},outline:{prefix:"e",qualifier:"outline",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adds an outline effect to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_outline"}))},pixelate:{prefix:"e",qualifier:"pixelate",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a pixelation effect.",url:"https://cloudinary.com/documentation/transformation_reference#e_pixelate"}))},pixelateFaces:{prefix:"e",qualifier:"pixelate_faces",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Pixelates all detected faces in an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_pixelate_faces"}))},pixelateRegion:{prefix:"e",qualifier:"pixelate_region",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Pixelates the region of an image specified by x, y, width and height, or an area of text.",url:"https://cloudinary.com/documentation/transformation_reference#e_pixelate_region"}))},radius:{qualifier:"r",schema:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Rounds the corners of an image or video.",url:"https://cloudinary.com/documentation/transformation_reference#r_round_corners"}))},redeye:{prefix:"e",qualifier:"redeye",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Automatically removes red eyes in an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_redeye"}))},replaceColor:{prefix:"e",qualifier:"replace_color",schema:s.string().describe(JSON.stringify({text:"Maps an input color and those similar to the input color to corresponding shades of a specified output color.",url:"https://cloudinary.com/documentation/transformation_reference#e_replace_color"}))},saturation:{prefix:"e",qualifier:"saturation",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adjusts an image or video saturation level.",url:"https://cloudinary.com/documentation/transformation_reference#e_saturation"}))},screen:{prefix:"e",qualifier:"screen",schema:s.boolean().describe(JSON.stringify({text:"A qualifier that blends image layers using the screen blend mode.",url:"https://cloudinary.com/documentation/transformation_reference#e_screen"}))},sepia:{prefix:"e",qualifier:"sepia",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Changes the color scheme of an image to sepia.",url:"https://cloudinary.com/documentation/transformation_reference#e_sepia"}))},shadow:{prefix:"e",qualifier:"shadow",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Adds a gray shadow to the bottom right of an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_shadow"}))},sharpen:{prefix:"e",qualifier:"sharpen",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a sharpening filter.",url:"https://cloudinary.com/documentation/transformation_reference#e_sharpen"}))},shear:{prefix:"e",qualifier:"shear",schema:s.string().describe(JSON.stringify({text:"Skews an image according to the two specified values in degrees.",url:"https://cloudinary.com/documentation/transformation_reference#e_shear"}))},simulateColorblind:{prefix:"e",qualifier:"simulate_colorblind",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Simulates the way an image would appear to someone with the specified color blind condition.",url:"https://cloudinary.com/documentation/transformation_reference#e_simulate_colorblind"}))},tint:{prefix:"e",qualifier:"tint",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Blends an image with one or more tint colors at a specified intensity.",url:"https://cloudinary.com/documentation/transformation_reference#e_tint"}))},trim:{prefix:"e",qualifier:"trim",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Detects and removes image edges whose color is similar to the corner pixels.",url:"https://cloudinary.com/documentation/transformation_reference#e_trim"}))},unsharpMask:{prefix:"e",qualifier:"unsharp_mask",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies an unsharp mask filter to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_unsharp_mask"}))},vectorize:{prefix:"e",qualifier:"vectorize",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Vectorizes an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_vectorize"}))},vibrance:{prefix:"e",qualifier:"vibrance",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a vibrance filter to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_vibrance"}))},vignette:{prefix:"e",qualifier:"vignette",schema:s.union([s.string(),s.boolean()]).describe(JSON.stringify({text:"Applies a vignette effect to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_vignette"}))}};function ke({prefix:r,qualifier:e,value:t,converters:n}){let i="";r&&(i=`${r}_`);let a=t;if(n==null||n.forEach(({test:o,convert:c})=>{o(a)&&(a=c(a))}),a===!0||a==="true")return`${i}${e}`;if(typeof a=="string"||typeof a=="number")return r?`${i}${e}:${a}`:`${e}_${a}`}function at(r){return`(${r.join(";")})`}function st(r){return typeof r!="string"?r:parseInt(r)}var sa=["auto","crop","fill","lfill","fill_pad","thumb"],mt=["auto","crop","fill","lfill","fill_pad","thumb"],Zt=["crop","thumb"],Qe="limit",Mt=s.object({aspectRatio:ut.schema.optional(),type:ue.schema,gravity:ne.schema.optional(),height:Le.schema.optional(),width:Ue.schema.optional(),x:Be.schema.optional(),y:Fe.schema.optional(),zoom:Ot.schema.optional(),source:s.boolean().optional()}),pr={aspectRatio:ut.schema.optional(),crop:s.union([ue.schema,Mt,s.array(Mt)]).default(Qe).optional(),gravity:ne.schema.optional(),zoom:Ot.schema.optional()},oa={props:pr,assetTypes:["image","images","video","videos"],plugin:r=>{const{cldAsset:e,options:t}=r;let n=[];typeof t.crop=="string"||typeof t.crop>"u"?n.push({aspectRatio:t.aspectRatio,height:t.height,gravity:t.gravity,type:t.crop||Qe,width:t.width,zoom:t.zoom}):typeof t.crop=="object"&&!Array.isArray(t.crop)?n.push(t.crop):Array.isArray(t.crop)&&(n=t.crop),n.length===1&&n[0].source===!0&&n.push({aspectRatio:t.aspectRatio,width:t.width,height:t.height,gravity:t.gravity,type:Qe,zoom:t.zoom});const i=[],a=[];for(const c of n){const u={width:c.width,height:c.height};typeof u.width>"u"&&typeof c.aspectRatio>"u"&&(u.width=t.width,typeof u.height>"u"&&(u.height=t.height));const l=ca({aspectRatio:c.aspectRatio,gravity:c.gravity,type:c.type||Qe,x:c.x,y:c.y,zoom:c.zoom,...u});l.length>0&&(c.source===!0?a.push(l):i.push(l))}a.forEach(c=>{c.length>0&&e.addTransformation(c.join(","))});const o={options:{}};return o.options&&i.length>0&&(o.options.resize=i.map(c=>c.join(",")).join("/")),o}};function ca(r){const{aspectRatio:e,type:t,x:n,y:i,zoom:a}=r;let o=r.gravity;const c=st(r.height),u=st(r.width),l=[],f=c||u,x=e&&sa.includes(t),E=typeof n=="number"||typeof n=="string",S=typeof i=="number"||typeof i=="string",j=E||S;return t&&(f||x||j)&&l.push(`c_${t}`),x&&l.push(`ar_${e}`),u&&l.push(`w_${u}`),!["limit"].includes(t)&&typeof c=="number"&&l.push(`h_${c}`),E&&l.push(`x_${n}`),S&&l.push(`y_${i}`),!o&&mt.includes(t)&&!j&&(o="auto"),o&&(o==="auto"&&!mt.includes(t)?console.warn(`Auto gravity can only be used with crop modes: ${mt.join(", ")}. Not applying gravity.`):l.push(`g_${o}`)),a&&(a==="auto"&&!Zt.includes(t)?console.warn(`Zoom can only be used with crop modes: ${Zt.join(", ")}. Not applying zoom.`):l.push(`z_${a}`)),l}var qt={angle:g.angle.schema.optional(),art:g.art.schema.optional(),autoBrightness:g.autoBrightness.schema.optional(),autoColor:g.autoColor.schema.optional(),autoContrast:g.autoContrast.schema.optional(),assistColorblind:g.assistColorblind.schema.optional(),background:g.background.schema.optional(),blackwhite:g.blackwhite.schema.optional(),blur:g.blur.schema.optional(),blurFaces:g.blurFaces.schema.optional(),blurRegion:g.blurRegion.schema.optional(),border:g.border.schema.optional(),brightness:g.brightness.schema.optional(),brightnessHSB:g.brightnessHSB.schema.optional(),cartoonify:g.cartoonify.schema.optional(),color:g.color.schema.optional(),colorize:g.colorize.schema.optional(),contrast:g.contrast.schema.optional(),distort:g.distort.schema.optional(),fillLight:g.fillLight.schema.optional(),gamma:g.gamma.schema.optional(),gradientFade:g.gradientFade.schema.optional(),grayscale:g.grayscale.schema.optional(),improve:g.improve.schema.optional(),loop:g.loop.schema.optional(),multiply:g.multiply.schema.optional(),negate:g.negate.schema.optional(),oilPaint:g.oilPaint.schema.optional(),opacity:g.opacity.schema.optional(),outline:g.outline.schema.optional(),pixelate:g.pixelate.schema.optional(),pixelateFaces:g.pixelateFaces.schema.optional(),pixelateRegion:g.pixelateRegion.schema.optional(),radius:g.radius.schema.optional(),redeye:g.redeye.schema.optional(),replaceColor:g.replaceColor.schema.optional(),saturation:g.saturation.schema.optional(),screen:g.screen.schema.optional(),sepia:g.sepia.schema.optional(),shadow:g.shadow.schema.optional(),sharpen:g.sharpen.schema.optional(),shear:g.shear.schema.optional(),simulateColorblind:g.simulateColorblind.schema.optional(),tint:g.tint.schema.optional(),trim:g.trim.schema.optional(),unsharpMask:g.unsharpMask.schema.optional(),vectorize:g.vectorize.schema.optional(),vibrance:g.vibrance.schema.optional(),vignette:g.vignette.schema.optional()},hr={effects:s.array(s.object(qt)).describe(JSON.stringify({text:"Array of objects specifying transformations to be applied to asset."})).optional(),...qt},la={props:hr,assetTypes:["image","images","video","videos"],plugin:r=>{const{cldAsset:e,options:t}=r;i({effects:g,options:t}).filter(a=>!!a).forEach(a=>e.effect(a)),Array.isArray(t==null?void 0:t.effects)&&(t==null||t.effects.forEach(a=>{const o=i({effects:g,options:a}).filter(c=>!!c).join(",");e.effect(o)}));function i({effects:a,options:o}){return Object.keys(a).map(c=>{const{prefix:u,qualifier:l,converters:f}=a[c];return ke({qualifier:l,prefix:u,value:o==null?void 0:o[c],converters:f})})}return{}}},{flagsEnum:Vt}=sr,mr={flags:be.schema.optional()},ua={props:mr,assetTypes:["image","images","video","videos"],plugin:r=>{const{cldAsset:e,options:t}=r,{flags:n=[]}=t;return Array.isArray(n)&&n.length>0?n.forEach(i=>{const{success:a}=Vt.safeParse(i);a&&e.addFlag(i)}):typeof n=="object"&&Object.entries(n).forEach(([i,a])=>{const{success:o}=Vt.safeParse(i);o&&e.addTransformation(`fl_${i}:${a}`)}),{}}},Ye=s.string(),gr={namedTransformations:s.union([Ye,s.array(Ye)]).describe(JSON.stringify({text:"Named transformations to apply to asset.",url:"https://cloudinary.com/documentation/image_transformations#named_transformations"})).optional(),transformations:s.union([Ye,s.array(Ye)]).describe(JSON.stringify({text:"Deprecated: use namedTransformations instead",url:"https://cloudinary.com/documentation/image_transformations#named_transformations"})).optional()},da={props:gr,strict:!0,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{const{transformations:t,namedTransformations:n}=e;t&&Hi.NODE_ENVIRONMENT==="development"&&console.warn("The transformations prop is deprecated. Please use namedTransformations instead.");let i=n||t||[];return Array.isArray(i)||(i=[i]),i.forEach(a=>{r.addTransformation(`t_${a}`)}),{}}},fa=s.object({alignment:s.string().optional(),antialias:s.string().optional(),border:s.string().optional(),color:s.string().optional(),fontFamily:s.string().optional(),fontSize:s.number().optional(),fontStyle:s.union([s.string(),s.number()]).optional(),fontWeight:s.string().optional(),hinting:s.union([s.string(),s.number()]).optional(),letterSpacing:s.union([s.string(),s.number()]).optional(),lineSpacing:s.union([s.string(),s.number()]).optional(),stroke:s.string().optional(),text:s.string()}),pa=s.object({angle:Je.schema.optional(),gravity:ne.schema.optional(),x:Be.schema.optional(),y:Fe.schema.optional()}),Dt=s.object({appliedEffects:s.array(s.object({})).optional(),appliedFlags:be.schema.optional(),effects:s.array(s.object({})).optional(),crop:ue.schema.optional(),flags:be.schema.optional(),height:Le.schema.optional(),position:pa.optional(),publicId:s.string().optional(),text:s.union([s.string(),fa]).optional(),url:s.string().optional(),width:Ue.schema.optional()}),gt={color:"black",fontFamily:"Arial",fontSize:200,fontWeight:"bold"},yr={overlay:Dt.describe(JSON.stringify({text:"Image or text layer that is applied on top of the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional(),overlays:s.array(Dt).describe(JSON.stringify({text:"Image or text layers that are applied on top of the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional(),text:s.string().describe(JSON.stringify({text:"Text to be overlaid on asset.",url:"https://cloudinary.com/documentation/image_transformations#transformation_url_structure"})).optional()},ha={props:yr,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{const{text:t,overlays:n=[]}=e,i="overlay",a="l";Array.isArray(n)&&n.forEach(o),typeof t=="string"?o({text:Object.assign({},gt,{text:t})}):typeof t=="object"&&o({text:Object.assign({},gt,t)});function o({publicId:c,url:u,position:l,text:f,effects:x=[],appliedEffects:E=[],flags:S=[],appliedFlags:j=[],...N}){var At;const q=typeof c=="string",B=typeof u=="string",de=typeof f=="object"||typeof f=="string",fe=typeof l=="object";if(!q&&!B&&!de){console.warn(`An ${i} is missing Public ID, URL, or Text`);return}let T;de?T=`${a}_text`:q?T=`${a}_${c.replace(/\//g,":")}`:B&&(T=`${a}_fetch:${Gr(u)}`);const C=[],ie=[];if(Object.keys(N).forEach(k=>{if(!H(G,k))return;const{qualifier:A,converters:R}=G[k],I=ke({qualifier:A,value:N[k],converters:R});I&&C.push(I)}),x.forEach(k=>{Object.keys(k).forEach(A=>{const R=G[A]||g[A]||me[A];if(!R)return;const{qualifier:I,prefix:xe,converters:Z}=R,F=ke({qualifier:I,prefix:xe,value:k[A],converters:Z});F&&C.push(F)})}),E.forEach(k=>{Object.keys(k).forEach(A=>{const R=G[A]||g[A]||me[A];if(!R)return;const{qualifier:I,prefix:xe,converters:Z}=R,F=ke({qualifier:I,prefix:xe,value:k[A],converters:Z});F&&ie.push(F)})}),(Array.isArray(S)?S:[S]).forEach(k=>{const{success:A}=ce.safeParse(k);A&&C.push(`fl_${k}`)}),(Array.isArray(j)?j:[j]).forEach(k=>{const{success:A}=ce.safeParse(k);A&&ie.push(`fl_${k}`)}),de){typeof f=="string"&&(f={...gt,text:f});const k=[];if(typeof f=="object"){const I=Object.keys(f).filter(Z=>H(ht,Z)).map(Z=>{const F=f&&H(f,Z)&&f[Z];return{...ht[Z],key:Z,value:F,order:ht[Z].order||99}}),xe=Kr(I,"order");for(const Z of xe){const{key:F,value:dt,qualifier:We,location:Dr,converters:ft}=Z;let He=dt;ft==null||ft.forEach(({test:zr,convert:Jr})=>{zr(dt)&&(He=Jr(dt))}),Dr==="primary"?C.push(`${We}_${He}`):We==="self"?k.push(F):We?k.push(`${We}_${He}`):k.push(He)}}const A={".":"%2E",",":"%2C","/":"%2F"};let R=(f==null?void 0:f.text)||"";typeof R=="string"&&((At=Object.keys(A))==null||At.forEach(I=>{R=R==null?void 0:R.replace(I,A[I])})),T=`${T}:${k.join("_")}:${R}`}fe&&Object.keys(l).forEach(k=>{if(!H(me,k)||!H(l,k))return;const{qualifier:A,converters:R}=me[k],I=ke({qualifier:A,value:l[k],converters:R});I&&ie.push(I)}),C.length>0&&(T=`${T},${C.join(",")}`),T=`${T}/fl_layer_apply,fl_no_overflow`,ie.length>0&&(T=`${T},${ie.join(",")}`),r.addTransformation(T)}return{}}},_r={preserveTransformations:s.boolean().describe(JSON.stringify({text:"Preserves transformations from a Cloudinary URL when using using a Cloudinary URL as the asset source (src)."})).optional()},ma={props:_r,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{const{preserveTransformations:t=!1}=e;if(t)try{Hr(e.src).map(i=>i.join(",")).flat().forEach(i=>{r.addTransformation(i)})}catch(n){console.warn(`Failed to preserve transformations: ${n.message}`)}return{}}},zt=s.string(),vr={rawTransformations:s.union([zt,s.array(zt)]).describe(JSON.stringify({text:"Array of transformation parameters using the Cloudinary URL API to apply to an asset.",url:"https://cloudinary.com/documentation/transformation_reference"})).optional()},ga={props:vr,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{let{rawTransformations:t=[]}=e;return Array.isArray(t)||(t=[t]),t.forEach(n=>{r.addTransformation(n)}),{}}},br={removeBackground:s.boolean().describe(JSON.stringify({text:"Removes the background of an image using the Cloudinary AI Background Removal Add-On (Required).",url:"https://cloudinary.com/documentation/cloudinary_ai_background_removal_addon"})).optional()},ya={props:br,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{removeBackground:n=!1}=t;return n&&e.effect("e_background_removal"),{}}},xr={sanitize:s.boolean().describe(JSON.stringify({text:"Runs a sanitizer on SVG images.",url:"https://cloudinary.com/documentation/transformation_reference#fl_sanitize"})).optional()},_a={props:xr,assetTypes:["image","images"],plugin:({cldAsset:r,options:e})=>{const{sanitize:t=!0}=e;return t&&(e.format==="svg"||r.publicID.endsWith(".svg"))&&r.effect("fl_sanitize"),{}}},wr={seoSuffix:s.string().describe(JSON.stringify({text:"Configures the URL to include an SEO-friendly suffix in the URL",url:"https://cloudinary.com/documentation/advanced_url_delivery_options#seo_friendly_media_asset_urls"})).optional()},va={props:wr,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{const{seoSuffix:t}=e;return typeof t=="string"&&(e.deliveryType==="fetch"?console.warn("SEO suffix is not supported with a delivery type of fetch"):r.setSuffix(t)),{}}},ba=s.object({angle:Je.schema.optional(),gravity:ne.schema.optional(),x:Be.schema.optional(),y:Fe.schema.optional()}),xa=s.object({appliedEffects:s.array(s.object({})).optional(),appliedFlags:be.schema.optional(),effects:s.array(s.object({})).optional(),crop:ue.schema.optional(),flags:be.schema.optional(),height:Le.schema.optional(),position:ba.optional(),publicId:s.string().optional(),type:s.string().optional(),url:s.string().optional(),width:Ue.schema.optional()}),Tr={underlay:s.string().describe(JSON.stringify({text:"Public ID of image that is applied under the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional(),underlays:s.array(xa).describe(JSON.stringify({text:"Image layers that are applied under the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional()},wa={props:Tr,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{const{underlay:t,underlays:n=[]}=e,i="u";Array.isArray(n)&&n.forEach(a),typeof t=="string"&&a({publicId:t,crop:"fill",width:"1.0",height:"1.0",flags:["relative"]});function a({publicId:o,type:c,position:u,effects:l=[],flags:f=[],appliedFlags:x=[],...E}){const S=typeof o=="string",j=typeof u=="object";if(!S){console.warn(`An ${c} is missing a Public ID`);return}let N=`${i}_${o.replace(/\//g,":")}`;const q=[],B=[];Object.keys(E).forEach(T=>{if(!H(G,T))return;const{qualifier:C}=G[T];q.push(`${C}_${E[T]}`)}),l.forEach(T=>{Object.keys(T).forEach(C=>{if(!H(G,C))return;const{qualifier:ie}=G[C];q.push(`${ie}_${T[C]}`)})}),j&&Object.keys(u).forEach(T=>{if(!H(me,T))return;const{qualifier:C}=me[T];B.push(`${C}_${u[T]}`)}),(Array.isArray(f)?f:[f]).forEach(T=>{const{success:C}=ce.safeParse(T);C&&q.push(`fl_${T}`)}),(Array.isArray(x)?x:[x]).forEach(T=>{const{success:C}=ce.safeParse(T);C&&B.push(`fl_${T}`)}),N=`${N},${q.join(",")}`,N=`${N}/fl_layer_apply,fl_no_overflow`,B.length>0&&(N=`${N},${B.join(",")}`),r.addTransformation(N)}return{}}},Sr={version:s.union([s.number(),s.string()]).describe(JSON.stringify({text:"Custom version number to apply to asset URL.",url:"https://cloudinary.com/documentation/advanced_url_delivery_options#asset_versions"})).optional()},Ta={props:Sr,assetTypes:["image","images","video","videos"],plugin:({cldAsset:r,options:e})=>{const{version:t}=e;return(typeof t=="string"||typeof t=="number")&&r.setVersion(`${t}`.replace("v","")),{}}},kr=s.object({assetType:s.string().default("image").describe(JSON.stringify({text:"The type of asset to deliver.",url:"https://cloudinary.com/documentation/image_transformations#transformation_url_structure"})).optional(),deliveryType:s.string().default("upload").describe(JSON.stringify({text:"Delivery method of the asset.",url:"https://cloudinary.com/documentation/image_transformations#delivery_types"})).optional(),dpr:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Delivery method of the asset.",url:"https://cloudinary.com/documentation/image_transformations#delivery_types"})).optional(),format:s.string().default("auto").describe(JSON.stringify({text:"Converts (if necessary) and delivers an asset in the specified format.",url:"https://cloudinary.com/documentation/transformation_reference#f_format"})).optional(),height:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Height of the given asset."})).optional(),quality:s.union([s.string(),s.number(),s.string()]).default("auto").describe(JSON.stringify({text:"Quality of the delivered asset",url:"https://cloudinary.com/documentation/transformation_reference#q_quality"})).optional(),src:s.string().describe(JSON.stringify({text:"Cloudinary Public ID or versioned Cloudinary URL (/v1234/)"})),strictTransformations:s.boolean().describe(JSON.stringify({text:"Gives you the ability to have more control over what transformations are permitted to be used from your Cloudinary account.",url:"https://cloudinary.com/documentation/control_access_to_media#strict_transformations"})).optional(),width:s.union([s.string(),s.number()]).describe(JSON.stringify({text:"Width of the given asset."})).optional(),...pr,...hr,...mr,...gr,...yr,..._r,...vr,...br,...xr,...wr,...Tr,...Sr}),Or={defaultImage:s.string().describe(JSON.stringify({text:"Configures the default image to use in case the given public ID is not available. Must include file extension.",url:"https://cloudinary.com/documentation/transformation_reference#d_default_image"})).optional()},Sa={props:Or,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{defaultImage:n}=t;if(typeof n=="string"){Wt(n)||console.warn("The defaultImage prop may be missing a format and must include it along with the public ID. (Ex: myimage.jpg)");const i=n.replace(/\//g,":");e.addTransformation(`d_${i}`)}return{}}},Ar={enhance:s.boolean().describe(JSON.stringify({text:"Uses AI to analyze an image and make adjustments to enhance the appeal of the image.",url:"https://cloudinary.com/documentation/transformation_reference#e_enhance"})).optional()},ka={props:Ar,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{enhance:n=!1}=t;return n&&e.effect("e_enhance"),{}}},Nr={extract:s.union([Se.schema.optional(),s.array(Se.schema).optional(),s.object({invert:s.boolean().default(!1).optional(),mode:ur.schema.optional(),multiple:dr.schema.default(!1).optional(),prompt:s.union([Se.schema,s.array(Se.schema)]).optional()})]).describe(JSON.stringify({text:"Extracts an area or multiple areas of an image, described in natural language.",url:"https://cloudinary.com/documentation/transformation_reference#e_extract"})).optional()},Oa={props:Nr,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{extract:n}=t;if(!n||typeof n>"u")return{};const i=[];if(typeof n=="string")i.push(`prompt_${n}`);else if(Array.isArray(n))i.push(`prompt_${Jt(n)}`);else if(typeof n=="object"&&!Array.isArray(n)){const a=Jt(n.prompt);a&&i.push(`prompt_${a}`),n.invert===!0&&i.push("invert_true"),typeof n.mode=="string"&&i.push(`mode_${n.mode}`),n.multiple===!0&&i.push("multiple_true")}if(i.length>0){const a=`e_extract:${i.join(";")}`;e.addTransformation(a)}return{}}};function Jt(r){if(typeof r=="string")return r;if(Array.isArray(r))return`(${r.filter(e=>typeof e=="string").join(";")})`}var Lt="pad",Cr={fillBackground:s.union([s.boolean(),s.object({crop:ue.schema.optional(),gravity:ne.schema.optional(),prompt:s.string().optional()})]).describe(JSON.stringify({text:"Uses Generative Fill to extended padded image with AI",url:"https://cloudinary.com/documentation/transformation_reference#b_gen_fill"})).optional()},Aa={props:Cr,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{fillBackground:n}=t;if(typeof n>"u")return{};const i=st(t.width),a=st(t.height),o=typeof a=="number"&&typeof i=="number";let c=t.aspectRatio;if(!c&&o&&(c=`${i}:${a}`),!c)return{};if(n===!0){const u=["b_gen_fill",`ar_${c}`,`c_${Lt}`];e.addTransformation(u.join(","))}else if(typeof n=="object"){const{crop:u=Lt,gravity:l,prompt:f}=n,x=[`ar_${c}`,`c_${u}`];typeof f=="string"?x.unshift(`b_gen_fill:${f}`):x.unshift("b_gen_fill"),typeof l=="string"&&x.push(`g_${l}`),e.addTransformation(x.join(","))}return{}}},Er=s.union([s.string(),s.array(s.string())]),Na=s.object({prompt:Er.optional(),to:s.string().optional(),multiple:s.boolean().optional()}),jr={recolor:s.union([Er,Na]).describe(JSON.stringify({text:"Uses generative AI to recolor parts of your image, maintaining the relative shading.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_recolor"})).optional()},Ca={props:jr,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{recolor:n}=t,i={prompt:void 0,"to-color":void 0,multiple:void 0};Array.isArray(n)?(Array.isArray(n[0])?i.prompt=at(n[0]):i.prompt=n[0],typeof n[1]=="string"&&(i["to-color"]=n[1])):typeof n=="object"&&(typeof n.prompt=="string"?i.prompt=n.prompt:Array.isArray(n.prompt)&&(i.prompt=at(n.prompt)),typeof n.to=="string"&&(i["to-color"]=n.to),n.multiple===!0&&(i.multiple="true"));const a=Object.entries(i).filter(([,o])=>!!o).map(([o,c])=>`${o}_${c}`).join(";");return a&&e.addTransformation(`e_gen_recolor:${a}`),{}}},Rr=s.union([s.string(),s.array(s.string())]),Ea=s.object({prompt:Rr.optional(),region:s.union([s.array(s.number()),s.array(s.array(s.number()))]).optional(),multiple:s.boolean().optional(),removeShadow:s.boolean().optional()}),$r={remove:s.union([Rr,Ea]).describe(JSON.stringify({text:"Applies zooming and/or panning to an image, resulting in a video or animated image.",url:"https://cloudinary.com/documentation/transformation_reference#e_zoompan"})).optional()},ja={props:$r,assetTypes:["image","images"],plugin:({cldAsset:r,options:e})=>{const{remove:t}=e,n={prompt:void 0,region:void 0,multiple:void 0,"remove-shadow":void 0};if(typeof t=="string")n.prompt=t;else if(Array.isArray(t))n.prompt=at(t);else if(typeof t=="object"){const a=typeof t.prompt=="string"||Array.isArray(t.prompt),o=Array.isArray(t.region);if(a&&o)throw new Error("Invalid remove options: you can not have both a prompt and a region. More info: https://cloudinary.com/documentation/transformation_reference#e_gen_remove");typeof t.prompt=="string"?n.prompt=t.prompt:Array.isArray(t.prompt)&&(n.prompt=at(t.prompt)),Array.isArray(t.region)&&(n.region=Pr(t.region)),t.multiple===!0&&(n.multiple="true"),t.removeShadow===!0&&(n["remove-shadow"]="true")}const i=Object.entries(n).filter(([,a])=>!!a).map(([a,o])=>`${a}_${o}`).join(";");return i&&r.addTransformation(`e_gen_remove:${i}`),{}}};function Pr(r){const e={0:"x",1:"y",2:"w",3:"h"};return`(${r.map((n,i)=>Array.isArray(n)?Pr(n):`${e[i]}_${n}`).join(";")})`}var Ir={replaceBackground:s.union([s.boolean(),s.string(),s.object({seed:s.number().optional(),prompt:s.string().optional()})]).describe(JSON.stringify({text:"Replaces the background of an image with an AI-generated background.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_background_replace"})).optional()},Ra={props:Ir,assetTypes:["image","images"],plugin:r=>{const{cldAsset:e,options:t}=r,{replaceBackground:n}=t;if(!n||typeof n>"u")return{};const i=[];typeof n=="object"?(typeof n.prompt<"u"&&i.push(`prompt_${n.prompt}`),typeof n.seed=="number"&&i.push(`seed_${n.seed}`)):typeof n=="string"&&i.push(`prompt_${n}`);let a="e_gen_background_replace";return i.length>0&&(a=`${a}:${i.join(";")}`),e.addTransformation(a),{}}},Zr={replace:s.union([s.array(s.string()),s.array(s.boolean()),s.object({to:s.string(),from:s.string(),preserveGeometry:s.boolean().optional()})]).describe(JSON.stringify({text:"Uses generative AI to replace parts of your image with something else.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_replace"})).optional()},$a={props:Zr,assetTypes:["image","images"],plugin:({cldAsset:r,options:e})=>{const{replace:t=null}=e;if(t){let n,i,a=!1;Array.isArray(t)?(n=t[0],i=t[1],a=t[2]||!1):(n=t.from,i=t.to,a=t.preserveGeometry||!1);const o=[`e_gen_replace:from_${n}`,`to_${i}`];a&&o.push(`preserve-geometry_${a}`),r.effect(o.join(";"))}return{}}},Mr={restore:s.boolean().describe(JSON.stringify({text:"Uses generative AI to restore details in poor quality images or images that may have become degraded through repeated processing and compression.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_restore"})).optional()},Pa={props:Mr,assetTypes:["image","images"],plugin:({cldAsset:r,options:e})=>{const{restore:t=!1}=e;return t&&r.effect("e_gen_restore"),{}}},qr={zoompan:s.union([s.string(),s.boolean(),s.object({loop:g.loop.schema.optional(),options:s.string()})]).describe(JSON.stringify({text:"Applies zooming and/or panning to an image, resulting in a video or animated image.",url:"https://cloudinary.com/documentation/transformation_reference#e_zoompan"})).optional()},Ia={props:qr,assetTypes:["image","images"],plugin:({cldAsset:r,options:e})=>{const{zoompan:t=!1}=e,n={format:void 0};if(t===!0)r.effect("e_zoompan");else if(typeof t=="string")t==="loop"?(r.effect("e_zoompan"),r.effect("e_loop")):r.effect(`e_zoompan:${t}`);else if(typeof t=="object"){let i="e_zoompan";typeof t.options=="string"&&(i=`${i}:${t.options}`),r.effect(i);let a;t.loop===!0?a="e_loop":(typeof t.loop=="string"||typeof t.loop=="number")&&(a=`e_loop:${t.loop}`),a&&r.effect(a)}return t!==!1&&(n.format="auto:animated"),{options:n}}},Za=kr.merge(s.object({...Or,...Ar,...Nr,...Cr,...jr,...$r,...Zr,...Ir,...Mr,...qr})),Vr={streamingProfile:s.string().describe(JSON.stringify({text:"The streaming profile to apply when delivering a video using adaptive bitrate streaming.",url:"https://cloudinary.com/documentation/transformation_reference#sp_streaming_profile"})).optional()},Ma={props:Vr,assetTypes:["video","videos"],plugin:r=>{const{cldAsset:e,options:t}=r,{streamingProfile:n}=t;return typeof n=="string"&&e.addTransformation(`sp_${n}`),{}}},qa=kr.merge(s.object({...Vr})),Va=s.any(),Da=s.any(),Ut=[ka,Oa,Ca,ya,ja,$a,Ra,Pa,oa,ma,ga,Ma,Sa,la,Aa,ua,ha,_a,da,va,wa,Ta,Ia],za=s.union([Za,qa]).describe(JSON.stringify({text:"Asset options (Image or Video) that define delivery URL including public ID and transformations.",path:"/url-loader/assetoptions"}));s.object({analytics:s.union([Va,s.boolean()]).describe(JSON.stringify({text:"Tech, dependency, and feature identifiers for tracking SDK usage related to Cloudinary.",path:"/url-loader/analyticsoptions"})).optional(),config:Da.describe(JSON.stringify({text:"Configuration parameters for environment and Cloudinary account.",url:"https://cloudinary.com/documentation/cloudinary_sdks#configuration_parameters",path:"/url-loader/analyticsoptions"})).optional(),options:za});function Ua({options:r,config:e={},analytics:t}){t===!1&&(typeof(e==null?void 0:e.url)>"u"&&(e.url={}),e.url.analytics=!1);const n=new Wi(e);if(typeof(r==null?void 0:r.src)!="string")throw Error("Failed to construct Cloudinary URL: Missing source (src) in options.");r!=null&&r.assetType||(r.assetType="image");const i=[];Ut.forEach(({props:l})=>{Object.keys(l).forEach(x=>{if(i.includes(x))throw new Error(`Option ${x} already exists!`);i.push(x)})});const a={};let o;if(typeof r.src=="string"&&/^https?:\/\//.test(r.src))try{const l=Ft(r.src);o=l==null?void 0:l.publicId,a.seoSuffix=l==null?void 0:l.seoSuffix,a.version=l==null?void 0:l.version}catch{}o||(o=r.src),Object.keys(a).forEach(l=>{H(r,l)||(r[l]=a[l])}),r.version??(r.version=1);let c;if(["image","images"].includes(r.assetType)?c=n.image(o):["video","videos"].includes(r.assetType)&&(c=n.video(o)),typeof c>"u")throw new Error("Invalid asset type.");const u={};if(Ut.forEach(({plugin:l,assetTypes:f,props:x,strict:E})=>{const S=(r==null?void 0:r.assetType)!==void 0&&f.includes(r.assetType),j=Object.keys(x),N=Object.keys(r),q=j.map(fe=>N.includes(fe)).filter(fe=>!!fe).length>0;if(!S){q&&console.warn(`One of the following props [${j.join(", ")}] was used with an unsupported asset type [${r==null?void 0:r.assetType}]`);return}if(r.strictTransformations&&!E){q&&console.warn(`One of the following props [${j.join(", ")}] was used that is not supported with Strict Transformations.`);return}const B=l({cldAsset:c,options:r}),{options:de}=B||{options:void 0};Object.assign(u,de)}),typeof u.resize=="string"&&c.addTransformation(u.resize),c.setDeliveryType((r==null?void 0:r.deliveryType)||"upload"),!r.strictTransformations){if(r!=null&&r.dpr){let N=r.dpr;typeof N=="number"&&(N=N.toFixed(1)),c.addTransformation(`dpr_${N}`)}const l=(r==null?void 0:r.format)==="default",f=Bt("f_",c,{matchType:"startsWith"}),x=f&&typeof(r==null?void 0:r.format)<"u";(u!=null&&u.format||!l&&(!f||x))&&c.format((r==null?void 0:r.format)||(u==null?void 0:u.format)||"auto");const E=(r==null?void 0:r.quality)==="default",S=Bt("q_",c,{matchType:"startsWith"}),j=S&&typeof(r==null?void 0:r.quality)<"u";!E&&(!S||j)&&c.quality((r==null?void 0:r.quality)||"auto")}return c.toURL({trackedAnalytics:t})}function Bt(r,e,t){if(typeof e.transformation>"u")return;const{matchType:n="includes"}=t||{};return e.transformation.actions.flatMap(o=>o.toString().split("/").flatMap(c=>c.split(","))).filter(o=>n==="startsWith"?o.startsWith(r):o.includes(r)).length>0}export{Ua as c,Ft as p};
